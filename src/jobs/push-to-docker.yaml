executor: architect
parameters:
  username:
    description: "Docker username"
    type: "string"
  password:
    description: "Docker password"
    type: "string"
  registry:
    description: "Docker registry"
    type: "string"
    default: "quay.io"
  image:
    type: "string"
steps:
  - checkout
  - setup_remote_docker:
      docker_layer_caching: true
      version: 18.09.3
  - attach_workspace:
      at: .
  - push-to-docker:
      username: <<parameters.username>>
      password: <<parameters.password>>
      registry: <<parameters.registry>>
      image: <<parameters.image>>
