parameters:
  username:
    type: "string"
  password:
    type: "string"
  registry:
    type: "string"
  image:
    type: "string"
steps:
  - run: echo -n "<<parameters.image>>:$(architect project version)" > docker_image_name
  - run: docker login --username "<<parameters.username>>" --password "<<parameters.password>>" "<<parameters.registry>>"
  - run: docker build -t "$(cat docker_image_name)" .
  - run: docker push $(cat docker_image_name)
