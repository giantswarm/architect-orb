parameters:
  kubernetes-version:
    type: string
steps:
  - run:
      name: "architect/integration-test-install-tools: Install kind"
      command: |
        CGO_ENABLED=0 GO111MODULE="on" go get sigs.k8s.io/kind@v0.8.1
  - run:
      name: "architect/integration-test-install-tools: Download kubectl"
      command: |
        curl -LO https://storage.googleapis.com/kubernetes-release/release/<< parameters.kubernetes-version >>/bin/linux/amd64/kubectl
  - run:
      name: "architect/integration-test-install-tools: Install kubectl"
      command: |
        chmod +x ./kubectl && sudo mv ./kubectl /usr/local/bin/kubectl
  - run:
      name: "architect/integration-test-install-tools: Check kubectl version"
      command: |
        kubectl version --client
  - run:
      name: "architect/integration-test-install-tools: Install Helm"
      command: |
        curl -L https://get.helm.sh/helm-v2.16.7-linux-amd64.tar.gz >./helm.tar.gz
        tar xzvf helm.tar.gz
        chmod u+x linux-amd64/helm
        sudo mv linux-amd64/helm /usr/local/bin/
